{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/eun/Desktop/\\u1110\\u1173\\u11A8\\u1112\\u116A\\u1111\\u1173\\u1105\\u1169\\u110C\\u1166\\u11A8\\u1110\\u1173/s03p22d208/frontend/PackMan/components/Auth/Auth.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport * as React from \"react\";\nimport AsyncStorage from \"react-native-web/dist/exports/AsyncStorage\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { NavigationContainer } from \"@react-navigation/native\";\nimport { createStackNavigator } from \"@react-navigation/stack\";\nvar AuthContext = React.createContext();\n\nfunction SplashScreen() {\n  return React.createElement(View, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 5\n    }\n  }, React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 7\n    }\n  }, \"Loading...\"));\n}\n\nfunction HomeScreen() {\n  var _React$useContext = React.useContext(AuthContext),\n      signOut = _React$useContext.signOut;\n\n  return React.createElement(View, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 5\n    }\n  }, React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }\n  }, \"Signed in!\"), React.createElement(Button, {\n    title: \"Sign out\",\n    onPress: signOut,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }\n  }));\n}\n\nfunction SignInScreen() {\n  var _React$useState = React.useState(\"\"),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      username = _React$useState2[0],\n      setUsername = _React$useState2[1];\n\n  var _React$useState3 = React.useState(\"\"),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      password = _React$useState4[0],\n      setPassword = _React$useState4[1];\n\n  var _React$useContext2 = React.useContext(AuthContext),\n      signIn = _React$useContext2.signIn;\n\n  return React.createElement(View, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 5\n    }\n  }, React.createElement(TextInput, {\n    placeholder: \"Username\",\n    value: username,\n    onChangeText: setUsername,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }\n  }), React.createElement(TextInput, {\n    placeholder: \"Password\",\n    value: password,\n    onChangeText: setPassword,\n    secureTextEntry: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }\n  }), React.createElement(Button, {\n    title: \"Sign in\",\n    onPress: function onPress() {\n      return signIn({\n        username: username,\n        password: password\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }));\n}\n\nvar Stack = createStackNavigator();\nexport default function App(_ref) {\n  var navigation = _ref.navigation;\n\n  var _React$useReducer = React.useReducer(function (prevState, action) {\n    switch (action.type) {\n      case \"RESTORE_TOKEN\":\n        return _objectSpread(_objectSpread({}, prevState), {}, {\n          userToken: action.token,\n          isLoading: false\n        });\n\n      case \"SIGN_IN\":\n        return _objectSpread(_objectSpread({}, prevState), {}, {\n          isSignout: false,\n          userToken: action.token\n        });\n\n      case \"SIGN_OUT\":\n        return _objectSpread(_objectSpread({}, prevState), {}, {\n          isSignout: true,\n          userToken: null\n        });\n    }\n  }, {\n    isLoading: true,\n    isSignout: false,\n    userToken: null\n  }),\n      _React$useReducer2 = _slicedToArray(_React$useReducer, 2),\n      state = _React$useReducer2[0],\n      dispatch = _React$useReducer2[1];\n\n  React.useEffect(function () {\n    var bootstrapAsync = function bootstrapAsync() {\n      var userToken;\n      return _regeneratorRuntime.async(function bootstrapAsync$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"userToken\"));\n\n            case 3:\n              userToken = _context.sent;\n              _context.next = 8;\n              break;\n\n            case 6:\n              _context.prev = 6;\n              _context.t0 = _context[\"catch\"](0);\n\n            case 8:\n              dispatch({\n                type: \"RESTORE_TOKEN\",\n                token: userToken\n              });\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[0, 6]], Promise);\n    };\n\n    bootstrapAsync();\n  }, []);\n  var authContext = React.useMemo(function () {\n    return {\n      signIn: function signIn(data) {\n        return _regeneratorRuntime.async(function signIn$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                dispatch({\n                  type: \"SIGN_IN\",\n                  token: \"dummy-auth-token\"\n                });\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, null, null, null, Promise);\n      },\n      signOut: function signOut() {\n        return dispatch({\n          type: \"SIGN_OUT\"\n        });\n      },\n      signUp: function signUp(data) {\n        return _regeneratorRuntime.async(function signUp$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                dispatch({\n                  type: \"SIGN_IN\",\n                  token: \"dummy-auth-token\"\n                });\n\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, null, null, null, Promise);\n      }\n    };\n  }, []);\n  return React.createElement(AuthContext.Provider, {\n    value: authContext,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 5\n    }\n  }, React.createElement(NavigationContainer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }\n  }, React.createElement(Stack.Navigator, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 9\n    }\n  }, state.isLoading ? React.createElement(Stack.Screen, {\n    name: \"Splash\",\n    component: SplashScreen,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 13\n    }\n  }) : state.userToken == null ? React.createElement(Stack.Screen, {\n    name: \"SignIn\",\n    component: SignInScreen,\n    options: {\n      title: \"Sign in\",\n      animationTypeForReplace: state.isSignout ? \"pop\" : \"push\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 13\n    }\n  }) : React.createElement(Stack.Screen, {\n    name: \"Home\",\n    component: HomeScreen,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 13\n    }\n  }))));\n}","map":{"version":3,"sources":["/Users/eun/Desktop/특화프로젝트/s03p22d208/frontend/PackMan/components/Auth/Auth.js"],"names":["React","NavigationContainer","createStackNavigator","AuthContext","createContext","SplashScreen","HomeScreen","useContext","signOut","SignInScreen","useState","username","setUsername","password","setPassword","signIn","Stack","App","navigation","useReducer","prevState","action","type","userToken","token","isLoading","isSignout","state","dispatch","useEffect","bootstrapAsync","AsyncStorage","getItem","authContext","useMemo","data","signUp","title","animationTypeForReplace"],"mappings":"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","sourcesContent":["// import * as React from \"react\";\n// import { createStackNavigator } from \"@react-navigation/stack\";\n\n// import SignIn from \"./SignIn\";\n// import SignUp from \"./SignUp\";\n\n// const Stack = createStackNavigator();\n\n// export default function Auth() {\n//   return (\n//     <Stack.Navigator>\n//       <Stack.Screen name=\"SignIn\" component={SignIn} />\n//       <Stack.Screen name=\"SignUp\" component={SignUp} />\n//     </Stack.Navigator>\n//   );\n// }\n\nimport * as React from \"react\";\nimport { AsyncStorage, Button, Text, TextInput, View } from \"react-native\";\nimport { NavigationContainer } from \"@react-navigation/native\";\nimport { createStackNavigator } from \"@react-navigation/stack\";\n\nconst AuthContext = React.createContext();\n\nfunction SplashScreen() {\n  return (\n    <View>\n      <Text>Loading...</Text>\n    </View>\n  );\n}\n\nfunction HomeScreen() {\n  const { signOut } = React.useContext(AuthContext);\n\n  return (\n    <View>\n      <Text>Signed in!</Text>\n      <Button title=\"Sign out\" onPress={signOut} />\n    </View>\n  );\n}\n\nfunction SignInScreen() {\n  const [username, setUsername] = React.useState(\"\");\n  const [password, setPassword] = React.useState(\"\");\n\n  const { signIn } = React.useContext(AuthContext);\n\n  return (\n    <View>\n      <TextInput\n        placeholder=\"Username\"\n        value={username}\n        onChangeText={setUsername}\n      />\n      <TextInput\n        placeholder=\"Password\"\n        value={password}\n        onChangeText={setPassword}\n        secureTextEntry\n      />\n      <Button title=\"Sign in\" onPress={() => signIn({ username, password })} />\n    </View>\n  );\n}\n\nconst Stack = createStackNavigator();\n\nexport default function App({ navigation }) {\n  const [state, dispatch] = React.useReducer(\n    (prevState, action) => {\n      switch (action.type) {\n        case \"RESTORE_TOKEN\":\n          return {\n            ...prevState,\n            userToken: action.token,\n            isLoading: false,\n          };\n        case \"SIGN_IN\":\n          return {\n            ...prevState,\n            isSignout: false,\n            userToken: action.token,\n          };\n        case \"SIGN_OUT\":\n          return {\n            ...prevState,\n            isSignout: true,\n            userToken: null,\n          };\n      }\n    },\n    {\n      isLoading: true,\n      isSignout: false,\n      userToken: null,\n    }\n  );\n\n  React.useEffect(() => {\n    // Fetch the token from storage then navigate to our appropriate place\n    const bootstrapAsync = async () => {\n      let userToken;\n\n      try {\n        userToken = await AsyncStorage.getItem(\"userToken\");\n      } catch (e) {\n        // Restoring token failed\n      }\n\n      // After restoring token, we may need to validate it in production apps\n\n      // This will switch to the App screen or Auth screen and this loading\n      // screen will be unmounted and thrown away.\n      dispatch({ type: \"RESTORE_TOKEN\", token: userToken });\n    };\n\n    bootstrapAsync();\n  }, []);\n\n  const authContext = React.useMemo(\n    () => ({\n      signIn: async (data) => {\n        // In a production app, we need to send some data (usually username, password) to server and get a token\n        // We will also need to handle errors if sign in failed\n        // After getting token, we need to persist the token using `AsyncStorage`\n        // In the example, we'll use a dummy token\n\n        dispatch({ type: \"SIGN_IN\", token: \"dummy-auth-token\" });\n      },\n      signOut: () => dispatch({ type: \"SIGN_OUT\" }),\n      signUp: async (data) => {\n        // In a production app, we need to send user data to server and get a token\n        // We will also need to handle errors if sign up failed\n        // After getting token, we need to persist the token using `AsyncStorage`\n        // In the example, we'll use a dummy token\n\n        dispatch({ type: \"SIGN_IN\", token: \"dummy-auth-token\" });\n      },\n    }),\n    []\n  );\n\n  return (\n    <AuthContext.Provider value={authContext}>\n      <NavigationContainer>\n        <Stack.Navigator>\n          {state.isLoading ? (\n            // We haven't finished checking for the token yet\n            <Stack.Screen name=\"Splash\" component={SplashScreen} />\n          ) : state.userToken == null ? (\n            // No token found, user isn't signed in\n            <Stack.Screen\n              name=\"SignIn\"\n              component={SignInScreen}\n              options={{\n                title: \"Sign in\",\n                // When logging out, a pop animation feels intuitive\n                animationTypeForReplace: state.isSignout ? \"pop\" : \"push\",\n              }}\n            />\n          ) : (\n            // User is signed in\n            <Stack.Screen name=\"Home\" component={HomeScreen} />\n          )}\n        </Stack.Navigator>\n      </NavigationContainer>\n    </AuthContext.Provider>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}